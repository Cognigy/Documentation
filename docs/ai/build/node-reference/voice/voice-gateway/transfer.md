---
title: "Transfer" 
slug: "transfer-vg" 
hidden: false 
tags:
  - Voice Gateway
  - Transfer
  - transfer a call
  - escalate a call
---

# Transfer

[![Version badge](https://img.shields.io/badge/Updated in-v4.96-blue.svg)](../../../../../release-notes/4.96.md)

<figure>
  <img class="image-center" src="../../../../../../_assets/ai/build/node-reference/vg/transfer.png" width="50%" />
</figure>

## Description

The Transfer Node allows you to transfer an ongoing call to a Tel or SIP target.

## Parameters

| Parameter                          | Type          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Transfer Type |
|------------------------------------|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| Transfer Type                      | Dropdown      | There are two transfer types: <ul><li>**Refer** — forwarding an existing call.</li><li>**Dial** — creating a new outgoing call. If you want to use this type and still have the old Node version, add a new Voice Gateway Transfer Node in the Flow Editor and manually transfer the required settings from the old Node.</li></ul>                                                                                                                                                                                  | -             |
| Reason                             | CognigyScript | The reason for the handover. It is shown in Voice Gateway logs.                                                                                                                                                                                                                                                                                                                                                                                                                                                      | All           |
| Target                             | CognigyScript | E.164 syntax or a SIP URI are supported.                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | All           |
| Caller ID                          | Number        | The caller ID. Some carriers, like Twilio, require a registered number for outgoing calls.                                                                                                                                                                                                                                                                                                                                                                                                                           | Dial          |
| Dial Music                         | URL           | Custom audio or ring-back which plays to the caller while the outbound call is ringing.  Only `.wav` or `.mp3` files are supported. The URL doesn't need to include the `.mp3` or `.wav` extension. For example, `https://abc.xyz/music.mp3` or `https://audio.jukehost.co.uk/N5pnlULbup8KabGRE7dsGwHTeIZAwWdr`.                                                                                                                                                                                                     | Dial          |
| Enable Duration Limit for Transfer | Toggle        | Automatically disconnects transferred calls after a set time to prevent excessive call durations. This setting is useful in the following cases:<ul><li>Limit call duration by automatically ending transferred calls that exceed the predefined time, helping manage system performance.</li><li>Free up resources by disconnecting calls if the caller forgets to hang up, making lines available for other callers.</li><li>Reduce costs by preventing unnecessary charges from long, unattended calls.</li></ul> | Dial          |
| Duration Limit                     | Number        | This parameter is active only when **Enable Duration Limit for Transfer** is selected. Set the maximum duration in seconds. Transferred calls end automatically after this time, even if the caller is on the line. The default value is `600`.                                                                                                                                                                                                                                                                      | Dial          |
| Timeout                            | Number        | The amount of time (in seconds) that the AI Agent will ring before a [no-answer](../../../../../voice-gateway/references/events/NO_ANSWER.md) timeout. The default value is 60 seconds.                                                                                                                                                                                                                                                                                                                              | Dial          |
| Enable Copilot                     | Toggle        | Creates the UUIValue which will be sent to the Contact Center through SIP Headers. Will collect information from the Transcription Webhook field as well as from the VG Endpoint Copilot Config field to create the UUIValue. This setting requires a configured [Voice Copilot](../../../../deploy/endpoint-reference/voice-copilot.md) Endpoint.                                                                                                                                                                   | Dial          |
| Copilot Headers Key                | CognigyScript | Define the Copilot Headers Key. The key is provider-dependent. For example, for Genesys, the key is `User-to-User`. The generated value becomes accessible after engaging the Transfer Node, located in the input object as `{{ "{{input.UUIValue}}" }}`. Note that you do not need to handle this value manually. It is automatically generated and added to the header.                                                                                                                                            | Dial          |

??? info "Transcribe"

    | Parameter               | Type          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Transfer Type |
    |-------------------------|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
    | STT Vendor              | Selector      | This option is only available on Voice Gateway. Select the desired STT Vendor. For custom use all lowercase letters like microsoft, google, aws, or nuance.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Dial          |
    | STT Language            | Selector      | Select the desired STT Language. For custom languages, use the following format: de-DE, fr-FR, en-US.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Dial          |
    | STT Label               | CognigyScript | The alternative name of the vendor is the one you [specify in the Voice Gateway Self-Service Portal](../../../../../voice-gateway/webapp/applications.md#add-additional-tts-and-stt-vendor). If you have created multiple speech services from the same vendor, use the label to specify which service to use.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Dial          |
    | Disable STT Punctuation | Toggle        | This parameter is active only when Google or Deepgram is selected in the STT Vendor setting.<br><br> Prevents the STT response from the AI Agent to include punctuation marks.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Dial          |
    | Deepgram Model          | Selector      | This parameter is active only when Deepgram is selected in the STT Vendor setting. <br><br> Choose a model for processing submitted audio. Each model is associated with a tier. Ensure that the selected tier is available for the chosen STT language.  For detailed information about Deepgram models, refer to the [Deepgram documentation](https://developers.deepgram.com/docs/model).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Dial          |
    | Endpointing             | Toggle        | This parameter is active only when Deepgram is selected in the STT Vendor setting. <br><br> Deepgram's Endpointing feature watches streaming audio for long pauses that signal the end of speech. When it spots an endpoint, it finalizes predictions and returns the transcript, marking it as complete with the `speech_final` parameter set to `true`.  For detailed information about Deepgram Endpointing, refer to the [Deepgram documentation](https://developers.deepgram.com/docs/endpointing).<br><br>The duration for detecting the end of speech is preconfigured with a default value (10 milliseconds). If you want to change this value, use the Endpointing Time setting.                                                                                                                                                                                                                                     | Dial          |
    | Endpointing Time        | Number        | This parameter is active only when Deepgram is selected in the STT Vendor setting and the Endpointing toggle is enabled. <br><br> Customize the duration (in milliseconds) for detecting the end of speech. The default is 10 milliseconds of silence. Transcripts are sent after detecting silence, and the system waits until the speaker resumes or the required silence time is reached. Once either condition is met, a transcript is sent back with `speech_final` set to `true`.                                                                                                                                                                                                                                                                                                                                                                                                                                       | Dial          |
    | Smart Formatting        | Toggle        | This parameter is active only when Deepgram is selected in the STT Vendor setting. <br><br> Deepgram's Smart Format feature applies additional formatting to transcripts to optimize them for human readability. Smart Format capabilities vary between models. When Smart Formatting is turned on, Deepgram will always apply the best-available formatting for your chosen model, tier, and language combination. For detailed examples, refer to the [Deepgram documentation](https://developers.deepgram.com/docs/smart-format). <br><br> Note that when Smart Formatting is turned on, punctuation will be activated, even if you have the Disable STT Punctuation setting enabled.                                                                                                                                                                                                                                      | Dial          |
    | Google Model            | Dropdown      | This parameter is active only when Google is selected in the STT Vendor setting.<br><br>Utilizes one of Google Cloud Speech-to-Text transcription models, with the `latest_short` model being the default choice. For a detailed list of Google models, refer to the [Transcription models](https://cloud.google.com/speech-to-text/docs/transcription-model#transcription_models)  section in the Google Documentation. Keep in mind that the `default` value is a Google Model type that can be used if other models don't suit your specific scenario.                                                                                                                                                                                                                                                                                                                                                                     | Dial          |
    | Transcription Webhook   | CognigyScript | The webhook is triggered with an HTTP POST whenever an interim or final transcription is received. If the **STT Vendor** and **STT Language** fields are empty, the system will use the default STT from the [Set Session Config Node](parameter-details.md) (if it exists) or from the [Voice Gateway Self-Service Portal](../../../../../voice-gateway/webapp/speech-services.md). The parameter supports [CognigyScript](../../../cognigyscript.md), allowing it to accept dynamic content. For example, you can specify the URL as follows: `https://test-hook.com?contact={{"{{ci.contact_name}}"}}`. <br><br> Note if the [Voice Copilot](../../../../deploy/endpoint-reference/voice-copilot.md) Endpoint is inactive, you can use any Webhook URL to receive voice call transcripts. However, when the Voice Copilot Endpoint is enabled, ensure that the specified Webhook URL is associated with it for processing. | Dial          |
    | Audio Stream Selection  | Selector      | Select the source of the audio stream: <ul><li>**Caller/Called** — both the incoming and outgoing audio streams of the caller and the called party.</li><li>**Caller** — the incoming and outgoing audio stream of the caller.</li><li>**Called** — the incoming and outgoing audio stream of the called party.</li></ul><br> Ensure that the selected audio stream matches the language specified for transcription. If no audio stream is provided, the system will use the one set in the beginning, which should also match the language specified for transcription.                                                                                                                                                                                                                                                                                                                                                     | Dial          |

??? info "Answering Machine Detection"

    Answering Machine Detection (AMD) determines whether an outgoing call has been answered by a human or a machine (such as a voicemail or answering machine). When AMD is enabled, events are generated in the Flow to indicate the detection result, allowing you to take specific actions based on the outcome.

    For example, if a call is transferred to a user and AMD detects a machine, you will receive an event indicating the machine detection.

    | Parameter                    | Type     | Description                                                                                                                                                                        | Transfer Type |
    |------------------------------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
    | Answering Machine Detection  | Toggle   | Indicates whether a call has been answered by a human agent or a machine.                                                                                                          | Dial          |
    | Redirect on machine detected | Selector | Redirects the call back to the Flow in case a machine was detected.                                                                                                                | Dial          |
    | Redirect text                | Text     | Text to say after machine was detected before going back to the Flow. For example, `Mailbox detected, your call will be redirected back to the AI Agent. Please stay in the call`. | Dial          |

??? info "Advanced"

    | Parameter                   | Type   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Transfer Type |
    |-----------------------------|--------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
    | Anchor Media                | Toggle | This parameter is deactivated by default. If activated, it routes all data between SIP endpoints through Voice Gateway. <br> Media anchoring can help you resolve NAT problems, enforce media security policies, and perform media transcoding and monitoring. This process changes the addresses and ports of incoming and outgoing data: <ul><li>Outgoing data — the source IP address and port become the IP address and port of Voice Gateway. The destination IP address and port become the IP address and port of the public network.</li><li>Incoming data — the source IP address and port become the IP address and port of Voice Gateway. The destination IP address and port become the IP address and port of the PBX system or local telephone.</li></ul> | Dial          |
    | Custom Transfer SIP Headers | Toggle | Data that needs to be sent as SIP headers in the generated SIP message.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | All           |
    | Transfer SIP Headers        | JSON   | An object containing SIP headers that should be sent to the transferee. Each header is a key-value pair: `{ "Header-Name": "Header-Value" }`. The following example shows a JSON object containing two key-value pairs: `{ "X-Caller-ID": "+1234567890", "X-Request-ID": "abc-123" }`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | All           |
    | Referred By                 | String | This parameter is optional.<br><br> This setting allows you to change the original Referred By value, which can be a SIP URI or a user identifier such as a phone number. To define the Referred By value, you can use the following patterns:<ul><li>**SIP URI** — `sip:[referred-by]@custom.domain.com`. In this case, the entire SIP URI will be sent as the Referred-By header. Example: `"Referred-by": "sip:CognigyOutbound@custom.domain.com"`.</li><li>**User Identifier** — `sip:[referred-by]@[SIP FROM Domain from carrier config]`. Example, `"Referred-By": "sip:CognigyOutbound@sip.cognigy.ai"`.</li></ul>                                                                                                                                               | Refer         |

### Troubleshooting

#### Possible 403 Error After Dial Transfer

In case you receive a 403 error log message after using a Transfer Node with Dial, check the related [PCAP](../../../../../voice-gateway/webapp/recent-calls.md) file in the Voice Gateway Self-Service Portal first. There you should get more information about the reason for the 403 error.

Some SBCs like Twilio may reject calls from unknown numbers.
In this case, it might be necessary to configure the P-Asserted-Identity header for the Transfer.
To do this, turn on the Custom Transfer SIP Headers toggle in the Advanced settings of the Transfer Node,
and enter the following in the JSON field:

```json
{
  "P-Asserted-Identity": "<sip:phonenumber@host>"
}
```

#### Possible 487 Error After Dial Transfer

In case you receive a 487 error log message after using a Transfer Node with Dial,
check the related [PCAP](../../../../../voice-gateway/webapp/recent-calls.md) file in the Voice Gateway Self-Service Portal first.
There you should see a `CANCEL` method followed by the `487 Request Terminated` error. 

This error indicates that the callee did not answer within the defined timeout.
Within the Flow, you will receive the [NO_ANSWER](../../../../../voice-gateway/references/events/NO_ANSWER.md) call event.