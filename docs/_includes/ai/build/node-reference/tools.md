## AI Agent Tool Settings

Tools are child Nodes of AI Agent Nodes. They define actions that can be taken by the AI Agent. If an AI Agent wants to execute the tool, the branch below the child Node is executed.

At the end of a tool branch, it is advisable to use a [Resolve Tool Action](https://docs.cognigy.com/ai/build/node-reference/ai/resolve-tool-action.md) Node to return to the AI Agent.

Clicking the Tool Node lets you define a tool, set its parameters, and allows debugging by enabling detailed messages about the tool's execution.

??? info "Tool"
    | Parameter   | Type          | Description                                                                                                                                          |
    |-------------|---------------|------------------------------------------------------------------------------------------------------------------------------------------------------|
    | Tool ID     | CognigyScript | Provide a meaningful name as a Tool ID. This ID can contain only letters, numbers, underscores (`_`), or dashes (`-`). For example, `update_user-1`. |
    | Description | CognigyScript | Provide a detailed description of what the tool does, when it should be used, and its parameters.                                                    |

??? info "Parameters"
    Configure the parameters that will be collected by the AI Agent before the tool is called. You can switch between the Graphical and JSON editors. When editing the JSON, follow the [JSON Schema specification](https://json-schema.org).

    | Parameter       | Type          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
    |-----------------|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | Use Parameters  | Toggle        | Activate this toggle to add parameters in addition to the tool name and description. The AI Agent will collect all data it needs and call a Tool with these parameters filled as arguments. These values can be accessed directly in the `input.aiAgent.toolArgs` object.                                                                                                                                                                                                                                                                                                                                                                           |
    | Name            | Text          | Specify the name of the parameter. The name should be clear and concise, and describe the purpose of the parameter.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
    | Type            | Selector      | Select a type of the parameter:<ul><li>**String** — a sequence of characters. For example, `"hello"`, `"123"`.</li><li>**Number** — a numerical value, which can be either an integer (for example,`5`) or a floating point number (for example, `3.14`).</li><li>**Boolean** — a logical value representing `true` or `false`.</li><li>**Array** — a collection of elements, which can contain multiple values of any type. For example, `["apple", "banana", "cherry"]`.</li><li>**Object** — a collection of key-value pairs, where each key is a string and the value can be of any type. For example, `{"name": "John", "age": 30}`.</li></ul> |
    | Description     | CognigyScript | Explain what parameter means by providing a brief description of the parameter's usage.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
    | Enum (optional) | Enum          | Define a set of values that the parameter can accept. The enum restricts the input to one of the specified values, ensuring only valid options are chosen. The enum is only available for string-type parameters in the Graphical editor. For other types, use the JSON editor. May not be supported by all LLM providers.                                                                                                                                                                                                                                                                                                                          |
    | Add Parameter   | Button        | Add a new parameter.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

??? info "Debug Settings"
    | Parameter                 | Type   | Description                                                                                                       |
    |---------------------------|--------|-------------------------------------------------------------------------------------------------------------------|
    | Debug Message when called | Toggle | Enable the output of a debug message when the tool is called to provide detailed information about the tool call. |

??? info "Advanced"
    | Parameter | Type          | Description                                                                                                                                                                                                                                                                                                                                                                       |
    |-----------|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | Condition | CognigyScript | The tool will be enabled only if the condition is evaluated as true. If false, the tool isn't part of the AI Agent's Tools within this execution. For example, when using the `unlock_account` tool, you can specify a condition like `context.accountStatus === "locked"`. This checks the value in the context, and if it is missing or different, the tool will not be enabled. |

## AI Agent MCP Tool Settings

MCP Tool Nodes are child Nodes of AI Agent Nodes. The MCP Tool Nodes connect to a remote [MCP server](https://modelcontextprotocol.io/introduction) to load tools that the AI Agent can execute. If an AI Agent wants to execute one of the loaded tools, the branch below the MCP Tool Node is triggered.

Clicking the MCP Tool Node lets you define the connection, filter loaded tools, and allows debugging by enabling detailed messages about the tool's execution.

??? info "MCP Tool"
    | Parameter          | Type          | Description                                                                                                                                                                            |
    |--------------------|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | Name               | CognigyScript | Provide a name for the MCP connection. This name helps you identify the source of the loaded tool.                                                                                     |
    | MCP Server SSE URL | CognigyScript | Provide the URL to an SSE (Server-Sent Events) endpoint from a remote [MCP server](https://modelcontextprotocol.io/introduction). Ensure that you connect only to trusted MCP servers. |
    | Timeout            | Slider        | Set the timeout time for the MCP connection in seconds.                                                                                                                                |

??? info "Debug Settings"
    | Parameter             | Type   | Description                                                                                                                                                                            |
    |-----------------------|--------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | Debug loaded Tools    | Toggle | Enable this parameter to display a debug message with all tools loaded from the MCP server. The debug message also includes tools that have been filtered out in the Advanced section. |
    | Debug with Parameters | Toggle | Enable this parameter to include the Tool Parameters in the debug message.                                                                                                             |
    | Debug calling Tool    | Toggle | Enable the output of a debug message when the tool is called to provide detailed information about the tool call.                                                                      |

??? info "Advanced"
    | Parameter   | Type          | Description                                                                                                                                                                                                                                                                                                                                                                                                               |
    |-------------|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | Cache Tools | Toggle        | Disable caching of loaded tools while developing. Ensure that caching is enabled in production for performance reasons. The caching time is 10 minutes.                                                                                                                                                                                                                                                                   |
    | Condition   | CognigyScript | The tool will be enabled only if the condition is evaluated as true. If false, the tool isn't part of the AI Agent's Tools within this execution. For example, when using the `unlock_account` tool, you can specify a condition like `context.accountStatus === "locked"`. This checks the value in the context, and if it is missing or different, the tool will not be enabled.                                         |
    | Tool Filter | Select        | Control tool filtering by selecting one of the following options:<br>- **None** — no tool filtering is applied, and all tools are available for execution. This option is selected by default. <br> - **Whitelist** — only tools on the list are allowed for execution, while all other tools are excluded. <br> - **Blacklist** — tools on the list are excluded from execution, while all other tools remain available. |
    | Blacklist   | CognigyScript | The parameter appears if you select **Blacklist** in **Tool Filter**. Specify the tools that should be blocked from execution. Specify only one tool per field.                                                                                                                                                                                                                                                           |
    | Whitelist   | CognigyScript | This parameter appears if you select **Whitelist** in **Tool Filter**. Specify the tools you want to allow for execution. Specify only one tool per field.                                                                                                                                                                                                                                                                |

## Call MCP Tool Settings

In the Flow editor, when you add an MCP Tool Node, a Call MCP Tool Node is automatically created below it. These two Nodes work together to define and execute the chosen tool. The Call MCP Tool Node sets the actual execution point of the chosen tool. This way, you can verify or modify teh tool call arguments in the `input.aiAgent.toolArgs` object, or add a Say Node before the tool call. When the Call MCP Tool Node is executed, the tool call is sent to the remote MCP server, where the Tool is executed remotely with any arguments set by the AI Agent.

To return the tool result to the AI Agent, the **Resolve Immediately** setting can be enabled to send the full result returned from the remote MCP server to the AI Agent.

As an alternative, use a [Resolve Tool Action](https://docs.cognigy.com/ai/build/node-reference/ai/resolve-tool-action.md) Node to return a specific result to the AI Agent.

??? info "Call MCP Tool"
    | Parameter           | Type   | Description                                                                                           |
    |---------------------|--------|-------------------------------------------------------------------------------------------------------|
    | Resolve Immediately | Toggle | Enable this parameter to immediately resolve the tool action with the full result as the tool answer. |

??? info "Storage Options"
    | Parameter   | Type          | Description                                                                                                                                          |
    |-------------|---------------|------------------------------------------------------------------------------------------------------------------------------------------------------|
    | How to handle the result    | Select        | Determine how to handle the MCP tool call result:<ul><li>**Store in Input** — stores the result in the Input object.</li><li>**Store in Context** — stores the result in the Context object.</li></ul> |
    | Input Key to store Result   | CognigyScript | The parameter appears when **Store in Input** is selected. The result is stored in the `input.aiAgent.toolResult` object by default. You can specify another value, but the **MCP Tool Result** Token won't work if the value is changed. |
    | Context Key to store Result | CognigyScript | The parameter appears when **Store in Context** is selected. The result is stored in the `context.aiAgent.toolResult` object by default. |

??? info "Debug Settings"
    | Parameter                 | Type   | Description                                                                                                       |
    |---------------------------|--------|-------------------------------------------------------------------------------------------------------------------|
    | Debug Tool Result | Toggle | Enable the output of a debug message with the tool call result after a successful call. |